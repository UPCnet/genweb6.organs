<html
  xmlns="http://www.w3.org/1999/xhtml"
  xml:lang="en"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  lang="ca"
  metal:use-macro="context/main_template/macros/master"
  i18n:domain="genweb6.organs">

<body>

  <div id="content-core" metal:fill-slot="main">

    <h2 i18n:translate="">Sessions i acords dels òrgans col·legiats</h2>

    <div class="row mb-4 list-agenda"
        tal:define="organ_govern view/getLatestCDG;
                    consell_social view/getLatestCS;
                    claustre view/getLatestCU">

      <div class="col-md-4 mb-3" tal:condition="organ_govern">
        <a tal:attributes="href organ_govern/url" class="card card-organ text-bg-light text-decoration-none h-100">
          <img src="/++theme++genweb6.organs/img/foto_consell_govern.jpg" class="card-img-top" alt="Consell de Govern" loading="lazy" decoding="async" />
          <div class="card-body d-flex justify-content-between align-items-center">
            <div class="card-txt">
              <h3 class="card-title h5" i18n:translate="">Consell de Govern</h3>
              <p class="card-text fs-xs" tal:content="organ_govern/title">Last session</p>
            </div>
            <div class="card-ic">
              <i class="bi bi-arrow-right-circle text-primary" aria-hidden="true"></i>
            </div>
          </div>
        </a>
      </div>

      <div class="col-md-4 mb-3" tal:condition="consell_social">
        <a tal:attributes="href consell_social/url" class="card card-organ text-bg-light text-decoration-none h-100">
          <img src="/++theme++genweb6.organs/img/foto_consell_social.jpg" class="card-img-top" alt="Consell Social" loading="lazy" decoding="async" />
          <div class="card-body d-flex justify-content-between align-items-center">
            <div class="card-txt">
              <h3 class="card-title h5" i18n:translate="">Consell Social</h3>
              <p class="card-text fs-xs" tal:content="consell_social/title">Last session</p>
            </div>
            <div class="card-ic">
              <i class="bi bi-arrow-right-circle text-primary" aria-hidden="true"></i>
            </div>
          </div>
        </a>
      </div>

      <div class="col-md-4 mb-3" tal:condition="claustre">
        <a tal:attributes="href claustre/url" class="card card-organ text-bg-light text-decoration-none h-100">
          <img src="/++theme++genweb6.organs/img/foto_claustre.jpg" class="card-img-top" alt="Claustre Universitari" loading="lazy" decoding="async" />
          <div class="card-body d-flex justify-content-between align-items-center">
            <div class="card-txt">
              <h3 class="card-title h5" i18n:translate="">Claustre Universitari</h3>
              <p class="card-text fs-xs" tal:content="claustre/title">Last session</p>
            </div>
            <div class="card-ic">
              <i class="bi bi-arrow-right-circle text-primary" aria-hidden="true"></i>
            </div>
          </div>
        </a>
      </div>
    </div>

    <tal:block tal:define="organs view/getOwnOrgans;" tal:condition="organs">
      <h2 i18n:translate="">La meva vinculació amb els òrgans de govern</h2>
      <div class="border rounded-3 text-bg-light p-3 meva-vinculacio">
        <tal:organs tal:repeat="organ organs">
          <div class="d-flex align-items-center">
            <span tal:attributes="style string:background-color:${organ/color};">&nbsp;</span>
            <i class="bi bi-journal ms-2"></i>
            <a tal:attributes="href organ/url;" class="mx-2">
              <tal:event content="organ/title">Organ Title</tal:event>
            </a>
            <div class="ms-auto badges" tal:condition="organ/role">
              <tal:roles tal:repeat="role organ/role">
                <span class="badge bg-primary me-1">
                  <tal:omit-tag tal:content="role" i18n:translate="">Secretari</tal:omit-tag>
                </span>
              </tal:roles>
            </div>
          </div>
        </tal:organs>
      </div>
    </tal:block>

    <!-- Caja principal de Eines -->

    <h2 i18n:translate="">Eines</h2>

    <section class="mb-4">
      <form id="search-form" name="searchform" action="@@search" role="search" class="border rounded-3 text-bg-light p-3">
        <input type="hidden" name="advanced_search" value="False" />
        <input type="hidden" name="created.range:record" value="min" />
        <div class="row mb-3 g-2 align-items-end">
          <div class="col-md-10 col-sm-12">
            <input type="text" class="form-control" id="searchText" name="SearchableText" placeholder="Cercar..."
              tal:attributes="value request/SearchableText|nothing" />
          </div>
          <div class="col-md-2 col-sm-12">
            <button type="submit" class="btn btn btn-primary w-100">
              <i class="bi bi-search me-2"></i>
              <span i18n:translate="">Cerca</span>
            </button>
          </div>
        </div>
        <div class="row mb-3 g-2">
          <div class="col-md-4">
            <label class="form-label" i18n:translate="">Tipus de document</label>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="genweb.organs.acord" id="acordCheck"
                     name="portal_type:list" checked="checked" />
              <label class="form-check-label" for="acordCheck" i18n:translate="">Acord</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="genweb.organs.punt" id="puntCheck"
                     name="portal_type:list" />
              <label class="form-check-label" for="puntCheck" i18n:translate="">Punt informatiu</label>
            </div>
          </div>
          <div class="col-md-4" tal:define="root_path view/root_path;
                                            isAnon context/@@plone_portal_state/anonymous;">
            <label class="form-label" i18n:translate="">Òrgan col·legiat</label>
            <div class="form-check" tal:condition="not:isAnon">
              <input class="form-check-input" type="checkbox" id="vinculatsCheck" name="path"
                     checked="checked" tal:attributes="value string:$root_path/not_anon_my_organs/" />
              <label class="form-check-label" for="vinculatsCheck" i18n:translate="">Òrgans vinculats amb mi</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="governCheck" name="path"
                     checked="checked" tal:attributes="value string:$root_path/ca/consell-de-govern/consell-de-govern/" />
              <label class="form-check-label" for="governCheck" i18n:translate="">Consell de Govern</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="socialCheck" name="path"
                     checked="checked" tal:attributes="value string:$root_path/ca/cs/ple-del-consell-social/" />
              <label class="form-check-label" for="socialCheck" i18n:translate="">Consell Social</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="claustreCheck" name="path"
                     checked="checked" tal:attributes="value string:$root_path/ca/claustre-universitari/claustre-universitari/" />
              <label class="form-check-label" for="claustreCheck" i18n:translate="">Claustre Universitari</label>
            </div>
          </div>
          <div class="col-md-4" tal:define="periodData view/getPeriodData">
            <label class="form-label" i18n:translate="">Període</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" value="any" id="periodeAny" name="created.query:record:list:date"
                     tal:attributes="value periodData/ever;
                                     checked periodData/is_ever_checked | nothing"/>
              <label class="form-check-label" for="periodeAny" i18n:translate="">Qualsevol data</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" value="darrer" id="periodeDarrer" name="created.query:record:list:date"
                     tal:attributes="value periodData/lastyear;
                                     checked periodData/is_lastyear_checked | nothing"/>
              <label class="form-check-label" for="periodeDarrer" i18n:translate="">Darrer any</label>
            </div>
            <input type="hidden" name="sort_on" value="Date" />
          </div>
        </div>
        <!-- Resultados de búsqueda -->
        <div class="row">
          <div class="col-12">
            <h3 class="h5" i18n:translate="">Resultats de la cerca</h3>
            <!-- Spinner de carga -->
            <div id="search-spinner" class="text-center py-4" style="display: none;">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden" i18n:translate="">Cercant...</span>
              </div>
              <div class="mt-2">
                <small class="text-muted" i18n:translate="">Cercant resultats...</small>
              </div>
            </div>
            <div id="search-results">
              <tal:block tal:define="results view/results;
                                     toLocalizedTime nocall:context/@@plone/toLocalizedTime">
                <tal:block tal:condition="results">
                  <div class="searchResults">
                    <tal:items repeat="item results">
                      <div class="mb-3">
                        <i class="bi bi-file-earmark-text me-2 text-secondary"></i>
                        <a tal:attributes="href item/getURL" tal:content="item/Title" class="fw-bold text-decoration-none"></a>
                        <div class="text-muted fs-s" tal:define="portal_url context/portal_url;
                                                    lang request/LANGUAGE|string:ca;
                                                    creator item/Creator;
                                                    author_url string:${portal_url}/${lang}/author/${creator};
                                                    modified item/modified|item/created">
                          <span i18n:translate="">per</span>
                          <a tal:attributes="href author_url" tal:content="creator" class="text-decoration-none"></a>
                          —
                          <span i18n:translate="">darrera modificació</span>
                          <tal:block tal:replace="python:toLocalizedTime(modified, long_format=True)" />
                        </div>
                        <cite class="documentLocation link-location text-muted fs-s"
                              tal:define="breadcrumbs python:view.breadcrumbs(item); is_rtl context/@@plone_portal_state/is_rtl;"
                              tal:condition="breadcrumbs">
                          <span i18n:translate="text_searchitem_location">Ubicat a</span>
                          <span tal:repeat="crumb breadcrumbs"
                                tal:attributes="dir python:is_rtl and 'rtl' or 'ltr';">
                            <tal:item tal:define="is_last repeat/crumb/end; url crumb/absolute_url; title crumb/Title">
                              <a tal:omit-tag="not: url"
                                 tal:attributes="href url"
                                 tal:content="title"
                                 class="text-decoration-none" />
                              <span class="breadcrumbSeparator" tal:condition="not: is_last">/</span>
                            </tal:item>
                          </span>
                        </cite>
                      </div>
                    </tal:items>
                  </div>
                </tal:block>
                <tal:block tal:condition="not:results">
                  <p class="text-muted" i18n:translate="">No s'han trobat resultats.</p>
                </tal:block>
              </tal:block>
            </div>
          </div>
        </div>
      </form>
    </section>

    <script defer src="/++theme++genweb6.organs/js/views/search.min.js"></script>

    <tal:banners>
      <div class="row">
        <div class="col-md-6 mb-3">
          <a href="https://governhistoric.upc.edu/ca/benvingut" target="_blank"
            class="card card-organ text-bg-light h-100 text-decoration-none d-flex flex-row justify-content-between align-items-center wrapper-img-link">
            <div class="card-body">
              <h2 class="card-title h5 mb-0" i18n:translate="">Hemeroteca i documentació d'òrgans d'anys anteriors</h2>
            </div>
            <div class="card-ic-circle flex-shrink-0 d-flex align-items-center justify-content-center rounded-circle border border-2 border-primary me-3">
              <i class="bi bi-box-arrow-up-right text-primary" aria-hidden="true"></i>
            </div>
          </a>
        </div>
        <div class="col-md-6 mb-3">
          <a href="https://www.upc.edu/slt/ca/recursos-redaccio/models-documents/governupc" target="_blank"
            class="card card-organ text-bg-light h-100 text-decoration-none d-flex flex-row justify-content-between align-items-center wrapper-img-link">
            <div class="card-body">
              <h2 class="card-title h5 mb-0" i18n:translate="">Pautes i models per a l'elaboració de documents</h2>
            </div>
            <div class="card-ic-circle flex-shrink-0 d-flex align-items-center justify-content-center rounded-circle border border-2 border-primary me-3">
              <i class="bi bi-box-arrow-up-right text-primary" aria-hidden="true"></i>
            </div>
          </a>
        </div>
      </div>
    </tal:banners>

  </div>

</body>

</html>