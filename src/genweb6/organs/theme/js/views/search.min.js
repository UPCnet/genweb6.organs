document.addEventListener("DOMContentLoaded",function(){let t=document.querySelector("#search-form"),n=document.querySelector("#search-results"),r=document.querySelector("#search-spinner"),a=t?t.querySelector('input[name="SearchableText"]'):null;function o(){var e=new FormData(t),e=new URLSearchParams(e).toString(),e=t.action+"?"+e;r.style.display="block",n.style.display="none",fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{var t=document.createElement("div"),e=(t.innerHTML=e,t.querySelector("#search-results"));e&&(n.innerHTML=e.innerHTML)}).catch(e=>{console.error("Error en la búsqueda:",e),n.innerHTML='<p class="text-danger">Error en la búsqueda. Intenta-ho de nou.</p>'}).finally(()=>{r.style.display="none",n.style.display="block"})}t&&n&&r&&(t.addEventListener("input",function(e){e.target!==a&&["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName)&&o()}),t.addEventListener("submit",function(e){e.preventDefault(),o()}))});